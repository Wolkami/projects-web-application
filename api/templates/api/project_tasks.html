{% extends 'api/base.html' %}
{% block title %}–ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞{% endblock %}

{% block content %}
<h2>–ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞: {{ project.title }}</h2>

<div class="mb-3">
    <a href="{% url 'project-view' project.id %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–µ–∫—Ç—É</a>
</div>

<form method="get" class="mb-3">
    <label for="status">–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É:</label>
    <select name="status" id="status" onchange="this.form.submit()" class="form-select w-auto d-inline-block ms-2">
        <option value="">–í—Å–µ</option>
        {% for value, label in Task.Status.choices %}
            <option value="{{ value }}" {% if status_filter == value %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
    </select>
</form>

<table class="table table-bordered table-striped">
    <thead>
    <tr>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–°—Ä–æ–∫</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {% for task in tasks %}
        <tr>
            <td>{{ task.title }}</td>
            <td>{{ task.assignee|default:"‚Äî" }}</td>
            <td>{{ task.get_status_display }}</td>
            <td>{{ task.due_date|default:"‚Äî" }}</td>
            <td>
                <a href="{% url 'task-detail-view' task.id %}" class="btn btn-sm btn-outline-primary">üëÅ</a>
                {% if request.user == project.creator or request.user == task.assignee %}
                    <a href="{% url 'edit-task' task.id %}" class="btn btn-sm btn-outline-secondary">‚úè</a>
                {% endif %}
            </td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="5" class="text-muted text-center">–ù–µ—Ç –∑–∞–¥–∞—á</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}